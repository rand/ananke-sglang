# SGLang Ananke Deployment Configuration
# Copy to .env and customize for your deployment

# =============================================================================
# Model Configuration
# =============================================================================

# HuggingFace model path or local path
MODEL_PATH=meta-llama/Llama-3.1-8B-Instruct

# HuggingFace API token (required for gated models)
HF_TOKEN=

# Model revision/branch (optional)
# MODEL_REVISION=main

# =============================================================================
# Server Configuration
# =============================================================================

# Server host and port
SGLANG_HOST=0.0.0.0
SGLANG_PORT=30000

# Tensor parallelism (number of GPUs for model sharding)
SGLANG_TP_SIZE=1

# Pipeline parallelism (for very large models)
# SGLANG_PP_SIZE=1

# Data parallelism (multiple model replicas)
# SGLANG_DP_SIZE=1

# GPU memory utilization fraction (0.0-1.0)
SGLANG_MEM_FRACTION=0.9

# Maximum number of running requests
# SGLANG_MAX_RUNNING_REQUESTS=128

# Maximum total tokens in batch
# SGLANG_MAX_TOTAL_TOKENS=32768

# =============================================================================
# Ananke Backend Configuration
# =============================================================================

# Grammar backend selection
# Options: xgrammar, outlines, llguidance, ananke, none
SGLANG_GRAMMAR_BACKEND=ananke

# Target programming language for type checking and import resolution
# Options: python, typescript, go, rust, kotlin, swift, zig
ANANKE_LANGUAGE=python

# Maximum rollback history in tokens for speculative decoding support
ANANKE_MAX_ROLLBACK_TOKENS=200

# Enabled constraint domains (comma-separated)
# Options: syntax, types, imports, controlflow, semantics
# Default: all domains enabled
# ANANKE_ENABLED_DOMAINS=syntax,types,imports,controlflow,semantics

# =============================================================================
# Constraint Specification (Advanced)
# =============================================================================

# Default constraint spec as JSON (optional)
# ANANKE_DEFAULT_CONSTRAINT_SPEC='{"language":"python","domains":["syntax","types"]}'

# URI to load constraint spec from (optional)
# ANANKE_CONSTRAINT_URI=file:///etc/sglang/constraints.json

# =============================================================================
# Logging & Monitoring
# =============================================================================

# Log level (DEBUG, INFO, WARNING, ERROR)
SGLANG_LOG_LEVEL=INFO

# Enable Prometheus metrics endpoint
SGLANG_ENABLE_METRICS=true

# Metrics port (if different from main server)
# SGLANG_METRICS_PORT=9090

# =============================================================================
# Performance Tuning
# =============================================================================

# Enable CUDA graph optimization
SGLANG_ENABLE_CUDA_GRAPH=true

# Chunked prefill size (0 to disable)
SGLANG_CHUNKED_PREFILL_SIZE=8192

# Disable radix cache (use linear cache instead)
# SGLANG_DISABLE_RADIX_CACHE=false

# Enable flashinfer sampling
SGLANG_ENABLE_FLASHINFER_SAMPLING=true

# =============================================================================
# Networking
# =============================================================================

# API key for authentication (optional)
# SGLANG_API_KEY=

# Enable CORS
# SGLANG_CORS_ORIGINS=*

# Request timeout in seconds
# SGLANG_TIMEOUT=300

# =============================================================================
# Docker/Container Specific
# =============================================================================

# Shared memory size for container
SHM_SIZE=10g

# GPU device IDs to use (comma-separated)
# NVIDIA_VISIBLE_DEVICES=0,1

# =============================================================================
# Cloud Platform Specific
# =============================================================================

# AWS Region (for SageMaker)
# AWS_REGION=us-west-2

# GCP Project (for Vertex AI)
# GCP_PROJECT=my-project

# GCP Region (for Vertex AI)
# GCP_REGION=us-central1

# Modal.com app name
# MODAL_APP_NAME=sglang-ananke
